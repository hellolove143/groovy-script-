pipeline {
	agent any

	stages {
	    stage ("scm") {
	        steps {
	        git 'https://github.com/hellolove143/cab-booking-webapp_PROJECT.git'
	        } 
	    }
	    stage ("code compile") {
	        steps {
	         sh 'mvn compile'
	         }
	    }
	    stage ("code test") {
	        steps {
	         sh 'mvn test'
	         }
	    }
	    stage ("code package") {
	        steps {
	         sh 'mvn package'
             }
        }
        stage ("build image") {
	        steps {
	         sh 'docker build -t hellolove123/cab-booking-app:${BUILD_NUMBER} .'
             sh 'trivy image hellolove123/cab-booking-app:${BUILD_NUMBER}'
            }
        }        
	}
}	
	
